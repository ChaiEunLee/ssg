import requests
from bs4 import BeautifulSoup as bs
from urllib import parse
import pandas as pd

serviceKey = '#받은serviceKey' 
params = {'ServiceKey':parse.unquote(serviceKey), # 서비스키(필수)
          'startCreateDt':20210101, # 데이터 생성일 시작범위(선택)
          'endCreateDt':20210430 } # 데이터 생성일 종료범위(선택)
# 서비스URL
url = '#http://openapi.data.go.kr/openapi/service/rest/Covid19/getCovid19SidoInfStateJson?'

res = requests.get(url, params=params)
soup = bs(res.text, 'lxml')

# 결과 출력
#print(soup)

#필요한 칼럼
rows = []
# iterate through each node of the tree
for item in items:
    n_defcnt = item.find("defcnt").text
    n_stdday = item.find("stdday").text
    n_localocccnt = item.find("localocccnt").text
    n_overflowcnt = item.find("overflowcnt").text
    n_gubun = item.find("gubun").text
    
    rows.append({"defcnt": n_defcnt, 
                 "stdday": n_stdday, 
                 "localocccnt": n_localocccnt, 
                 "overflowcnt": n_overflowcnt,
                "gubun":n_gubun})
